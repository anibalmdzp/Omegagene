========================
System Preparation
========================

:Author: Kota Kasahara

------------------------------------
Input files
------------------------------------

The input files required for MD simulations by *omegagene* are compatible with myPresto/psygene.
*omegagene* requires

1. Restart file (including the initial coordinates and velocities)
2. Topology file (generated by Tplgene program)
3. Shake file (generated by SHAKEinp program)

In addition, two configuration files are required. 

4. System configuration file (system.cfg)
5. Simulation configuration file (md.cfg)

omega_toolkit generates a binary file by combining some of the input files.

::

  python2.7 ${OMEGATK}/mdinput_generator.py -i system.cfg -o system.cls -v v.0.52

Example of system.cfg file is shown below:

system.cfg::

  --fn-i-tpl          et1.tpl     ; Topology file
  --fn-i-initial-pdb  et1.pdb     ; Structure file in .pdb format 
  --fn-i-restart      et1.restart ; Restart file
  --cell-x            61.2425     ; Specifying the each length of cell-axes
  --cell-y            61.2425
  --cell-z            61.2425
  --fn-i-shake        system.shk  ; SHAKE file
  ;--fn-i-ttp-v-mcmd-inp      ttp_v_mcmd.inp  ; For V-McMD 
  ;--fn-i-ttp-v-mcmd-initial  start.vert      ; For V-McMD

md_input.cfg::

  --mode                  md                 ; Only the keyword "md" is accepted
  --integrator            leapfrog-presto    ; "leapfrog-presto" or "zhang"
  --thermostat            scaling     ; Thermostat algorithm
                                      ; "none" or "scaling"
  --cutoff                12.0        ; Cutoff distance in angestrome
  --n-steps               10          ; The number of steps to be calculated
  --time-step             2.0         ; Integration time step in fs
  --electrostatic         zero-dipole ; Only "zero-dipole" is accepted for GPU
  			  	      ; "zero-quadrupole", "zero-octupole", and
				      ; "zero-hexadecapole" are also aceppted for CPU.
  --ele-alpha             0           ; Dumping factor for ZD
  			  	      ;   only 0 is OK for GPU version
  --temperature           300         ; The target temperature
  ;--temperature-init     10          ; The initial temperature
  ;--heating-steps        10000       ; The number of steps for heating
  --print-interval-log    1           ; Interval steps for printing logs
  --print-interval-coord  1           ; Interval steps for output the trajectory
  --fn-o-coord            trpc.trr    ; File name for the output trajectory
  --format-o-coord        presto      ; File format for the output trajectory
                                      ; only "presto" is allowed.
  ;--fn-o-log              et1.log     ; Not used in the current version
  ;--fn-o-energy           et1.ene     ; Not used in the current version
  --nsgrid-cutoff         13.0        ; Neighbor search cutoff radius (angstrom)
  --nsgrid-update-intvl   50          ; Interval time steps for update the neighbor search grid

  ; Expanded ensemble 
  ;--expanded-ensemble             v-mcmd         ; "none", "v-mcmd", or "v-aus"
  ;--fn-o-vmcmd-log                ttp_v_mcmd.out ; Output filename
  ;--fn-o-expand-lambda            mule.ene       ; Output filename
  ;--print-interval-expand-lambda  1              ; Interval steps for the output
  ;--format-o-expand-lambda        ascii          ; "ascii", or "binary"

------------------------------------
Execute
------------------------------------

*omegagene* executes a MD simulation with two configuration files provided as command line arguments.
The current version of omegagene output log messages to the standard output.
Redirecting to a log file is recommended.

::

  omegagene --inp et1.cls --cfg md_input.cfg > log.txt

